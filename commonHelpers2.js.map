{"version":3,"file":"commonHelpers2.js","sources":["../src/js/products-api.js","../src/js/loader.js","../src/js/discount.js","../src/js/popular.js","../src/js/products-list.js","../src/js/filters.js","../src/js/scroll.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/products';\n\nexport function getProducts(page, limit) {\n  return axios.get(`${BASE_URL}`, {\n    params: {\n      page: page,\n      limit: limit,\n    },\n  });\n}\n\nexport function getProductsKeyword(page, limit, keyword) {\n  return axios.get(`${BASE_URL}`, {\n    params: {\n      page: page,\n      limit: limit,\n      keyword: keyword,\n    },\n  });\n}\n\nexport function getProductsByCategory(page, limit, category) {\n  return axios.get(`${BASE_URL}`, {\n    params: {\n      page: page,\n      limit: limit,\n      category: category,\n    },\n  });\n}\n\nexport async function getCategories() {\n  try {\n    const response = await axios.get(`${BASE_URL}/categories`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n    throw error;\n  }\n}\n\nexport function getFilteredProducts({\n  page,\n  limit,\n  keyword,\n  category,\n  byABC,\n  byPrice,\n  byPopularity,\n}) {\n  const params = {\n    page,\n    limit,\n    ...(keyword && { keyword }),\n    ...(category && { category }),\n    ...(byABC && { byABC }),\n    ...(byPrice && { byPrice }),\n    ...(byPopularity && { byPopularity }),\n  };\n\n  return axios.get(`${BASE_URL}`, { params });\n}\n\nexport async function getProductById(id) {\n  try {\n    const response = await axios.get(`${BASE_URL}/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching product by id:', error);\n    throw error;\n  }\n}\n","const loader = document.querySelector('.loader');\nconst mainContent = document.getElementById('main-content');\n\nfunction scrollToFilters() {\n  const filtersSection = document.getElementById('filters-section');\n  if (filtersSection) {\n    filtersSection.scrollIntoView({ behavior: 'smooth' });\n  }\n}\n\nexport function showLoader() {\n  loader.removeAttribute('hidden');\n  Array.from(mainContent.children).forEach(child => {\n    // Перевірка, чи child містить .search-container\n    const searchContainer = child.querySelector('.search-container');\n    if (!searchContainer) {\n      child.style.filter = 'blur(5px) grayscale(1)';\n    }\n  });\n}\n\nexport function hideLoader() {\n  loader.setAttribute('hidden', '');\n  Array.from(mainContent.children).forEach(child => {\n    child.style.filter = 'none';\n  });\n  scrollToFilters();\n}\n","import axios from 'axios';\nimport icons from '../img/icone/symbol-defs.svg';\nimport { updateCartButtonIcons, setCartButtonEventListeners } from './local-storage';\nimport Swal from 'sweetalert2';\nimport { getProductById } from './products-api'\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const discountProductsContainer = document.getElementById(\"discount-products\");\n    const paginationContainer = document.getElementById('pagination');\n\n\n    async function fetchDiscountProducts(page) {\n        try {\n            const respone = await axios.get('https://food-boutique.b.goit.study/api/products/discount?page=${page}&limit=${itemsPerPage}`');\n            const discountProducts = respone.data;\n            // console.log(discountProducts);\n\n            discountProductsContainer.innerHTML = '';\n\n            // Вибірка тільки 2 продуктів для відображення\n            // const productsToDisplay = discountProducts.slice(0, 2);\n\n            // productsToDisplay.forEach(product => {\n            //     const card = createProductCard(product);\n            //     console.log(product);\n            //     discountProductsContainer.innerHTML += card;\n            // });\n            discountProducts.forEach(product => {\n                const card = createProductCard(product)\n                \n                discountProductsContainer.innerHTML += card;\n            });\n            discountProducts.forEach(product => {\n                const productElement = document.querySelector(`[data-product-id=\"${product._id}\"]`);\n                productElement.addEventListener('click', () => fetchAndShowProductDetails(product._id, discountProducts));\n              });\n            updateCartButtonIcons(discountProducts, '.cart-btn-list-discount', icons); // Використання уніфікованої функції\n            setCartButtonEventListeners(discountProducts, '.cart-btn-list-discount', icons); // Використання уніфікованої функції\n        } catch (error) {\n            console.error('Error fetching discount products:', error);\n        }\n    }\n\n    fetchDiscountProducts();\n\n    function createProductCard(product) {\n        const longText = product.name;\n        const maxLength = 12;\n        const screenWidth = window.innerWidth;\n        const shouldShowFullText = longText.length > maxLength && screenWidth >= 1440;\n        const truncatedText = truncateText(longText, maxLength);\n           return `\n        <li class=\"card-container-list-discount\" id=\"${product._id}\" data-product-id=\"${product._id}\">\n        <div class=\"photo-card-list-discount\">\n                <div class=\"product-modal-list-discount\">\n                    <div class=\"img-container-list-discount\">\n                        <svg width=\"60\" height=\"60\" class=\"product-image-discount\">\n                            <use href=\"${icons}#icon-discount-green\"></use>\n                         </svg>\n                        <img class=\"product-image-list-discount\" src=\"${product.img}\" alt=\"${product.name} photo\" width=114 height=114 loading=\"lazy\" />\n                    </div>\n                    </div>\n                    <div class=\"product-info-list\">\n                        <div class=\"price-and-btn-list-discount\">\n                        <h2 class=\"product-name-list-discount${shouldShowFullText ? ' show-full-text' : ''}\" title=\"${shouldShowFullText ? longText : ''}\">${truncatedText}</h2>\n                        <h2 class=\"price-discount\">$${product.price}</h2>\n                            <button class='cart-btn-list-discount' type=\"button\" data-product-id=\"${product._id}\">          \n                                <svg class='list-cart-svg-list' width=\"18\" height=\"18\" >\n                                    <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n            </div>\n        </li>\n        `\n    }\n\n// Якщо довжина h2 більша maxLength, то додаємо ... і текст виводимо під курсором для екранів від 1440px\n    function truncateText(text, maxLength) {\n        const screenWidth = window.innerWidth;\n        return screenWidth >= 1440 && text.length > maxLength ? `${text.slice(0, maxLength)}...` : text;\n    }\n\n\n})\n\nconst discountProductsContainer = document.getElementById(\"discount-products\");\n\ndiscountProductsContainer.addEventListener(\"mouseover\", function () {\n    discountProductsContainer.style.overflowY = \"auto\";\n});\ndiscountProductsContainer.addEventListener(\"mouseout\", function () {\n    discountProductsContainer.style.overflowY = \"hidden\";\n});\n\nasync function fetchAndShowProductDetails(productId, discountProductsContainer) {\n    try {\n      const product = await getProductById(productId);\n      showProductDetails(product, discountProductsContainer);\n    } catch (error) {\n      console.error('Error fetching product details:', error);\n    }\n  }\n  function showProductDetails(product, results) {\n    Swal.fire({\n      html: `\n        <div class=\"modal-product-container\">\n          <div class=\"modal-image-container\">\n            <img src=\"${product.img}\" alt=\"${product.name}\">\n          </div>\n          <div class=\"modal-product-info\">\n            <h2 class=\"modal-product-title\">${product.name}</h2>\n            <p><span class=\"modal-product-text\">Category:</span> <span class=\"modal-product-value\">${product.category}</span></p>\n            <p><span class=\"modal-product-text\">Size:</span> <span class=\"modal-product-value\">${product.size}</span></p>\n            <p><span class=\"modal-product-text\">Popularity:</span> <span class=\"modal-product-value\">${product.popularity}</span></p>\n            <p class=\"modal-product-description\">${product.desc}</p>\n          </div>\n        </div>\n        <div class=\"modal-price-button-container\">\n          <p class=\"modal-product-price\">$${product.price}</p>\n          <button class='modal-add-to-cart-btn' type=\"button\" data-product-id=\"${product._id}\">\n            Add to \n            <svg class=\"modal-add-to-cart-svg\" width=\"18\" height=\"18\">\n              <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n            </svg>\n          </button>\n        </div>\n        <svg class=\"custom-close-icon\" width=\"28\" height=\"28\">\n          <use href=\"${icons}#icon-close-sharp\"></use>\n        </svg>\n      `,\n      showConfirmButton: false,\n      customClass: {\n        container: 'custom-swal',\n      },\n    });\n    \n    setCartButtonEventListeners(results, '.modal-add-to-cart-btn', icons);\n    updateCartButtonIcons(results, '.modal-add-to-cart-btn', icons);\n    document.querySelector('.custom-close-icon').addEventListener('click', () => {\n      Swal.close();\n    });\n  }\n  \n//  <img class=\"product-image-discount\" src=\"./img/discount-green.svg\" alt=\"Discount\" width=\"60\" height=\"60\"></img>","import axios from 'axios';\nimport icons from '../img/icone/symbol-defs.svg';\nimport {\n  updateCartButtonIcons,\n  setCartButtonEventListeners,\n} from './local-storage';\nimport Swal from 'sweetalert2';\nimport { getProductById } from './products-api'\n\nconst POPULAR_URL = 'https://food-boutique.b.goit.study/api/products/popular';\n\nasync function fetchProducts() {\n  try {\n    const response = await axios.get(`${POPULAR_URL}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching popular products:', error);\n    throw error;\n  }\n}\n\nfunction renderPopularProducts(products) {\n  const productList = document.querySelector('.popular-product-list');\n\n  if (productList) {\n    products.forEach(product => {\n      const listItem = document.createElement('li');\n      listItem.classList.add('popular-product-item');\n\n      const popularCategoryWithoutUnderscore = product.category\n        .split('_')\n        .join(' ');\n\n      listItem.innerHTML = `\n      <div class=\"popular-modal\"  data-product-id=\"${product._id}\">\n      <div class=\"popular-img\">\n        <img class=\"popular-photo-item\" src=\"${product.img}\" alt=\"${product.name}\" width=\"56\" height=\"56\" loading=\"lazy\">\n      </div>  \n      <ul class=\"about-popular\">\n        <li class=\"name-popular-product\">${product.name}</li>\n        <li class=\"subname-popular-product\">Category: <span class=\"id-subname\">${popularCategoryWithoutUnderscore}</span></li>\n        <li class=\"subname-popular-product\">Size: <span class=\"id-subname\">${product.size}</span></li>\n        <li class=\"subname-popular-product\">Popularity: <span class=\"id-subname\">${product.popularity}</span></li>\n      </ul>\n      <button class='popular-cart-btn' type=\"button\" data-product-id=\"${product._id}\">\n        <svg class=\"list-cart-svg-list\" width=\"18\" height=\"18\">\n          <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n        </svg>\n      </button>\n    </div>\n    \n      `;\n      productList.appendChild(listItem);\n    });\n  }\n  products.forEach(product => {\n    const productElement = document.querySelector(`[data-product-id=\"${product._id}\"]`);\n    productElement.addEventListener('click', () => fetchAndShowProductDetails(product._id, products));\n  });\n  updateCartButtonIcons(products, '.popular-cart-btn', icons);\n  setCartButtonEventListeners(products, '.popular-cart-btn', icons);\n  \n}\n\nfetchProducts()\n  .then(popularProducts => {\n    renderPopularProducts(popularProducts);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n\n  async function fetchAndShowProductDetails(productId, products) {\n    try {\n      const product = await getProductById(productId);\n      showProductDetails(product, products);\n    } catch (error) {\n      console.error('Error fetching product details:', error);\n    }\n  }\n  function showProductDetails(product, results) {\n    Swal.fire({\n      html: `\n        <div class=\"modal-product-container\">\n          <div class=\"modal-image-container\">\n            <img src=\"${product.img}\" alt=\"${product.name}\">\n          </div>\n          <div class=\"modal-product-info\">\n            <h2 class=\"modal-product-title\">${product.name}</h2>\n            <p><span class=\"modal-product-text\">Category:</span> <span class=\"modal-product-value\">${product.category}</span></p>\n            <p><span class=\"modal-product-text\">Size:</span> <span class=\"modal-product-value\">${product.size}</span></p>\n            <p><span class=\"modal-product-text\">Popularity:</span> <span class=\"modal-product-value\">${product.popularity}</span></p>\n            <p class=\"modal-product-description\">${product.desc}</p>\n          </div>\n        </div>\n        <div class=\"modal-price-button-container\">\n          <p class=\"modal-product-price\">$${product.price}</p>\n          <button class='modal-add-to-cart-btn' type=\"button\" data-product-id=\"${product._id}\">\n            Add to \n            <svg class=\"modal-add-to-cart-svg\" width=\"18\" height=\"18\">\n              <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n            </svg>\n          </button>\n        </div>\n        <svg class=\"custom-close-icon\" width=\"28\" height=\"28\">\n          <use href=\"${icons}#icon-close-sharp\"></use>\n        </svg>\n      `,\n      showConfirmButton: false,\n      customClass: {\n        container: 'custom-swal',\n      },\n    });\n    \n    setCartButtonEventListeners(results, '.modal-add-to-cart-btn', icons);\n    updateCartButtonIcons(results, '.modal-add-to-cart-btn', icons);\n    document.querySelector('.custom-close-icon').addEventListener('click', () => {\n      Swal.close();\n    });\n  }\n  ","import Swal from 'sweetalert2';\nimport { showLoader, hideLoader } from './loader.js';\nimport icons from '../img/icone/symbol-defs.svg';\nimport { getFilteredProducts, getProductById } from './products-api';\nimport {\n  getFilters,\n  updateFilter,\n  updateCartButtonIcons,\n  setCartButtonEventListeners,\n} from './local-storage';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport Pagination from 'tui-pagination';\n\nconst productsListContainer = document.getElementById('products-list-container');\nconst noSearchDivContainerElement = document.querySelector('.no-results-container');\n\nlet pagination;\n\nwindow.addEventListener('resize', updatePageSize);\n\n//викликаємо у renderProducts самою першою, щоб оновити розміри сторінки та перезаписати limits\nfunction updatePageSize() {\n  let limit;\n  if (window.innerWidth >= 1440) {\n    limit = 9;\n  } else if (window.innerWidth >= 768) {\n    limit = 8;\n  } else {\n    limit = 6;\n  }\n  const currentFilters = getFilters();\n  if (currentFilters.limit !== limit) {\n    updateFilter('page', 1);\n    updateFilter('limit', limit); //оновлюємо ліміти, НЕ ВИДАЛЯТИ\n    renderProducts()\n  }\n}\n\nfunction removeAndRecreatePaginationContainer() {\n  const container = document.getElementById('tui-pagination-container');\n  if (container) {\n    container.remove();\n  }\n\n  const newContainer = document.createElement('div');\n  newContainer.id = 'tui-pagination-container';\n  newContainer.className = 'tui-pagination';\n  productsListContainer.after(newContainer);\n}\n\nexport async function renderProducts() {\n  updatePageSize();\n  const filters = getFilters();\n  let page = filters.page || 1;\n  let limit = filters.limit || 6;\n  showLoader();\n\n  try {\n    const response = await getFilteredProducts(filters);\n    const { perPage, totalPages, results } = response.data;\n    const totalItems = perPage * totalPages;\n\n    if (results.length === 0) {\n      noSearchDivContainerElement.classList.remove('visually-hidden');\n      productsListContainer.innerHTML = '';\n      //НЕ ВИДАЛЯТИ, забирає контейнер, коли в картках нічого не знайдено\n      const containerPagination = document.getElementById('tui-pagination-container');\n      containerPagination.classList.add('visually-hidden');\n      return;\n    }\n\n    productsListContainer.innerHTML = createMarkup(results);\n    noSearchDivContainerElement.classList.add('visually-hidden');\n    results.forEach(product => {\n      const productElement = document.querySelector(`[data-product-id=\"${product._id}\"]`);\n      productElement.addEventListener('click', () => fetchAndShowProductDetails(product._id, results));\n    });\n    setupPagination(totalItems, page, limit);\n    setCartButtonEventListeners(results, '.cart-btn-list', icons);\n    updateCartButtonIcons(results, '.cart-btn-list', icons);\n  } catch (error) {\n    console.error('Error fetching products', error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction setupPagination(totalItems, currentPage, itemsPerPage) {\n  removeAndRecreatePaginationContainer();\n  const container = document.getElementById('tui-pagination-container');\n  if (totalItems > itemsPerPage) {\n    const visiblePages = window.innerWidth < 768 ? 2 : 4;\n    pagination = new Pagination(container, {\n      totalItems,\n      itemsPerPage,\n      visiblePages,\n      centerAlign: true,\n      page: currentPage,\n    });\n    pagination.on('beforeMove', event => {\n      updateFilter('page', event.page);\n      renderProducts();\n    });\n  } else {\n    //НЕ ВИДАЛЯТИ ЦЕЙ ELSE, бо хоч його візуально не видно, він займає місце на сторінці. Видаляємо контейнер зі сторінки, коли відмальовується лише 1 сторінка з картками\n    container.classList.add('visually-hidden');\n  }\n}\n\nexport function createMarkup(arr) {\n  return `<ul class=\"card-container-list\">${arr\n    .map(item => {\n      const categoryWithoutUnderscore = item.category.split('_').join(' ');\n      return `\n        <li class=\"photo-card-list\" data-product-id=\"${item._id}\">\n          <div class=\"img-container-list\">\n            <img class=\"product-image-list\" src=\"${item.img}\" alt=\"${item.name} photo\" width=140 height=140 loading=\"lazy\" />\n          </div>\n          <div class=\"product-info-list\">\n            <h2 class=\"product-name-list\">${item.name}</h2>\n            <div class='product-atributes-list'>\n              <p class=\"atributes-info-list\">\n                <b class=\"atributes-list\">Category:</b> ${categoryWithoutUnderscore}\n              </p>\n              <p class=\"atributes-info-list\">\n                <b class=\"atributes-list\">Size:</b> ${item.size}\n              </p>\n              <p class=\"atributes-info-list\">\n                <b class=\"atributes-list\">Popularity:</b> ${item.popularity}\n              </p>\n            </div>\n            <div class=\"price-and-btn-list\">\n              <h2 class=\"product-price-list\">$${item.price}</h2>\n              <button class='cart-btn-list' type=\"button\" data-product-id=\"${item._id}\">\n                <svg class=\"list-cart-svg-list\" width=\"18\" height=\"18\">\n                  <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </li>`;\n    })\n    .join('')}</ul>`;\n}\n\nasync function fetchAndShowProductDetails(productId, results) {\n  try {\n    showLoader();\n    const product = await getProductById(productId);\n    showProductDetails(product, results);\n  } catch (error) {\n    console.error('Error fetching product details:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction showProductDetails(product, results) {\n  Swal.fire({\n    html: `\n      <div class=\"modal-product-container\">\n        <div class=\"modal-image-container\">\n          <img class=\"modal-img\" src=\"${product.img}\" alt=\"${product.name}\">\n        </div>\n        <div class=\"modal-product-info\">\n          <h2 class=\"modal-product-title\">${product.name}</h2>\n          <div class=\"modal-product-main-info>\n            <p class=\"text-box\">\n              <span class=\"modal-product-text\">Category:</span> <span class=\"modal-product-value\">${product.category}</span>\n            </p>\n            <p class=\"text-box\">\n              <span class=\"modal-product-text\">Size:</span> <span class=\"modal-product-value\">${product.size}</span>\n            </p>\n            <p class=\"text-box\">\n              <span class=\"modal-product-text\">Popularity:</span> <span class=\"modal-product-value\">${product.popularity}</span>\n            </p>\n          </div>\n          <p id=\"modal-product-description\" class=\"modal-product-description\">${product.desc}</p>  \n        </div>\n      </div>\n      <div class=\"modal-price-button-container\">\n        <p class=\"modal-product-price\">$${product.price}</p>\n        <button class='modal-add-to-cart-btn' type=\"button\" data-product-id=\"${product._id}\">\n         Add to <span class=\"modal-button-text\">Add to</span> \n          <svg class=\"modal-add-to-cart-svg\" width=\"18\" height=\"18\">\n            <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\"></use>\n          </svg>\n        </button>\n      </div>\n      <svg class=\"custom-close-icon\" width=\"28\" height=\"28\">\n        <use href=\"${icons}#icon-close-sharp\"></use>\n      </svg>\n    `,\n    showConfirmButton: false,\n    customClass: {\n      container: 'custom-swal',\n    },\n  });\n\n  setCartButtonEventListeners(results, '.modal-add-to-cart-btn', icons);\n  updateCartButtonIcons(results, '.modal-add-to-cart-btn', icons);\n  document.querySelector('.custom-close-icon').addEventListener('click', () => {\n    Swal.close();\n  });\n}\n\n","import { getCategories } from './products-api';\nimport { updateFilter, getFilters } from './local-storage';\nimport { renderProducts } from './products-list';\n\nasync function handleFilterUpdate(filters) {\n  for (const key in filters) {\n    updateFilter(key, filters[key]);\n  }\n  updateFilter('page', 1); // Повернення на першу сторінку при зміні фільтра\n  await renderProducts();\n}\n\nasync function loadCategories() {\n  try {\n    const categories = await getCategories();\n    const categorySelect = document.getElementById('category-select');\n\n    categories.forEach(category => {\n      const option = document.createElement('option');\n      option.value = category;\n      option.textContent = category.replace(/_/g, ' ');\n      categorySelect.appendChild(option);\n    });\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n  }\n}\n\nasync function initializeFilters() {\n  const filters = getFilters();\n\n  if (filters.keyword) {\n    document.getElementById('search-bar-id').value = filters.keyword;\n  }\n  await loadCategories();\n  if (filters.category) {\n    document.getElementById('category-select').value = filters.category;\n  }\n  if (filters.byABC || filters.byPrice || filters.byPopularity) {\n    const sortSelect = document.getElementById('sorting-select');\n    sortSelect.value = filters.byABC\n      ? 'byABC'\n      : filters.byPrice\n        ? 'byPrice'\n        : 'byPopularity';\n  }\n\n  await renderProducts();\n}\n\nfunction setupFilterEventListeners() {\n  const filterForm = document.getElementById('search-form');\n  const filterFormElements = filterForm.elements;\n  const searchBar = filterFormElements['item-search-value'];\n  const categorySelect = filterFormElements['category-select'];\n  const sortingSelect = filterFormElements['sorting-select'];\n\n  filterForm.addEventListener('submit', async event => {\n    event.preventDefault();\n    const keyword = searchBar.value.trim();\n    await handleFilterUpdate({ keyword: keyword || null });\n  });\n\n  // Додати слухачі для обох випадаючих списків і поля пошуку\n  categorySelect.addEventListener('change', updateFilters);\n  sortingSelect.addEventListener('change', updateFilters);\n  searchBar.addEventListener('input', updateFilters);\n\n  async function updateFilters() {\n    const filters = {\n      keyword: searchBar.value.trim() || null,\n      category: categorySelect.value !== 'Show all' ? categorySelect.value : null,\n      byABC: sortingSelect.value === 'byABC',\n      byPrice: sortingSelect.value === 'byPrice',\n      byPopularity: sortingSelect.value === 'byPopularity'\n    };\n    await handleFilterUpdate(filters);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  initializeFilters();\n  setupFilterEventListeners();\n});\n","window.onscroll = () => checkPosition();\n\n// тепер призначимо обробником подій трохи загальмовану функцію:\n; (() => {\n    window.addEventListener('scroll', throttle(checkPosition, 250));\n    window.addEventListener('resize', throttle(checkPosition, 250));\n})()\n\nasync function checkPosition() {\n    const body = document.querySelector('body');\n    // Нам потрібно знати висоту документа та висоту екрану:\n    const bodyHeight = document.body.offsetHeight;\n    const screenHeight = window.innerHeight;\n    // Записуємо, скільки пікселів користувач вже проскролив:\n    const scrolled = window.scrollY;\n    // Позначимо поріг, після наближення якого викликатимемо якусь дію. У нашому випадку – чверть екрана до кінця сторінки:\n    const threshold = bodyHeight - screenHeight / 4;\n    // Відстежуємо, де знаходиться низ екрана щодо сторінки:\n    const position = scrolled + screenHeight;\n\n    if (position > threshold) {\n        // Якщо ми перетнули смугу-поріг, викликаємо потрібну дію.\n        // await fetchPictures()\n        body.classList.add('body--no-transparency');\n    } else {\n        body.classList.remove('body--no-transparency');\n    }\n}\n\n\nfunction throttle(callee, timeout) {\n    // Обробку прокручування варто трохи пригальмовувати, щоб вона виконувалася трохи рідше і таким чином менше навантажувала браузер. Додамо функцію throttle()\n    let timer = null;\n\n    return function perform(...args) {\n        if (timer) return;\n\n        timer = setTimeout(() => {\n            callee(...args);\n\n            clearTimeout(timer);\n            timer = null;\n        }, timeout)\n    }\n}\n\n// Наступну частину коду копіюєте до себе\n// Слухач заганяємо в умову: активний, якщо карток більш однієї сторінки\n//  if (totalImages > perPage) {\n// window.addEventListener('scroll', handleScroll);\n//         }\n\n// Функція для бескінечного скролу\n// function handleScroll() {\n//     const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n//     if (scrollTop + clientHeight >= scrollHeight - 1) {\n// запускаємо функцію завантаження наступної сторінки\n// onLoadMore();\n//     }\n// }"],"names":["BASE_URL","getCategories","axios","error","getFilteredProducts","page","limit","keyword","category","byABC","byPrice","byPopularity","params","getProductById","id","loader","mainContent","scrollToFilters","filtersSection","showLoader","child","hideLoader","discountProductsContainer","fetchDiscountProducts","discountProducts","product","card","createProductCard","fetchAndShowProductDetails","updateCartButtonIcons","icons","setCartButtonEventListeners","longText","maxLength","screenWidth","shouldShowFullText","truncatedText","truncateText","text","productId","showProductDetails","results","Swal","POPULAR_URL","fetchProducts","renderPopularProducts","products","productList","listItem","popularCategoryWithoutUnderscore","popularProducts","productsListContainer","noSearchDivContainerElement","pagination","updatePageSize","getFilters","updateFilter","renderProducts","removeAndRecreatePaginationContainer","container","newContainer","filters","response","perPage","totalPages","totalItems","createMarkup","setupPagination","currentPage","itemsPerPage","visiblePages","Pagination","event","arr","item","categoryWithoutUnderscore","handleFilterUpdate","key","loadCategories","categories","categorySelect","option","initializeFilters","sortSelect","setupFilterEventListeners","filterForm","filterFormElements","searchBar","sortingSelect","updateFilters","checkPosition","throttle","body","bodyHeight","screenHeight","scrolled","threshold","callee","timeout","timer","args"],"mappings":"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"}