{"version":3,"file":"commonHelpers2.js","sources":["../src/js/products-api.js","../src/js/footer.js","../src/img/icone/symbol-defs.svg","../src/js/products-list.js","../src/js/scroll.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/products';\n\nexport function getProducts(page, limit) {\n    return axios.get(`${BASE_URL}`, {\n        params: {\n            page: page,\n            limit: limit,\n        },\n    });\n};\n\n","document.addEventListener('DOMContentLoaded', () => {\n    const subscriptionForm = document.querySelector('.footer-sub-form');\n\n    subscriptionForm.addEventListener('submit', async (e) => {\n        e.preventDefault();\n\n        const emailInput = subscriptionForm.querySelector('.footer-email-input');\n        const email = emailInput.value;\n\n        // Перевірка валідності email\n        if (!emailInput.checkValidity()) {\n            alert('Please enter a valid email address.');\n            return;\n        }\n\n        // Об'єкт, що відправляється на сервер\n        const subscriptionData = { email };\n\n        try {\n            const response = await fetch('https://food-boutique.b.goit.study/api/subscription', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(subscriptionData),\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                alert(data.message);\n            } else if (response.status === 409) {\n                alert('This email is already subscribed.');\n            } else {\n                throw new Error('Failed to subscribe.');\n            }\n        } catch (error) {\n            alert('Error: ' + error.message);\n        }\n    });\n});\n","export default \"__VITE_ASSET__58b6efc7__\"","import icons from '../img/icone/symbol-defs.svg';\nimport { getProducts } from './products-api';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport Pagination from 'tui-pagination';\n\nconst mainProductCard = document.querySelector('.main-box');\n// const formEl = document.querySelector('.search-form')\n\nasync function renderProducts() {\n  let page = 1;\n  let limit;\n\n  if (window.innerWidth >= 1440) {\n    limit = 9;\n  } else if (window.innerWidth >= 768) {\n    limit = 8;\n  } else {\n    limit = 6;\n  }\n\n  try {\n    const { data } = await getProducts(page, limit);\n    console.log(data);\n      const { perPage, totalPages, results } = data;\n      const totalItems = perPage * totalPages;\n    console.log(results);\n    createMarkup(results);\n\n    mainProductCard.innerHTML =\n      createMarkup(results) +\n      `\n  <div id=\"tui-pagination-container\" class=\"tui-pagination\"></div>\n</div>\n`;\n\n    const container = document.getElementById('tui-pagination-container');\n    const pagination = new Pagination(container, {\n      totalItems: totalItems,\n      itemsPerPage: limit,\n      visiblePages: 4,\n      centerAlign: true,\n    });\n    pagination.on('change', page => {\n      renderProducts(page);\n    });\n  } catch (error) {\n    console.error('Error fetching products', error);\n  }\n}\n\n// Call the renderProducts function to automatically render the first page on page load\nrenderProducts();\n\nfunction createMarkup(arr) {\n  return `<ul class=\"card-container-list\">${arr\n    .map(item => {\n      const categoryWithoutUnderscore = item.category.split('_').join(' ');\n      return `\n            <li class=\"photo-card-list\">\n                <a class=\"product-modal-list\" href=\"МОДАЛЬНЕ ВІКНО\">\n                    <div class=\"img-container-list\">\n                        <img class=\"product-image-list\" src=\"${item.img}\" alt=\"${item.name} photo\" width=140 height=140 loading=\"lazy\" />\n                    </div>\n                    <div class=\"product-info-list\">\n                        <h2 class=\"product-name-list\">${item.name}</h2>\n                        <div class='product-atributes-list'>\n                            <p class=\"atributes-info-list\">\n                                <b class=\"atributes-list\">Category:</b> ${categoryWithoutUnderscore}\n                            </p>\n                            <p class=\"atributes-info-list\">\n                                <b class=\"atributes-list\">Size:</b> ${item.size}\n                            </p>\n                            <p class=\"atributes-info-list\">\n                                <b class=\"atributes-list\">Popularity:</b> ${item.popularity}\n                            </p>\n                        </div>\n                        \n                        <div class=\"price-and-btn-list\">\n                            <h2 class=\"product-price-list\">$${item.price}</h2>\n                            <button class='cart-btn-list' type=\"button\">          \n                                <svg class=\"list-cart-svg-list\" width=\"18\" height=\"18\">\n                                    <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\">\n                                    </use>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                </a>\n            </li>\n        `;\n    })\n    .join('')}\n\n\t `;\n}\n","window.onscroll = () => checkPosition();\n\n// тепер призначимо обробником подій трохи загальмовану функцію:\n; (() => {\n    window.addEventListener('scroll', throttle(checkPosition, 250));\n    window.addEventListener('resize', throttle(checkPosition, 250));\n})()\n\nasync function checkPosition() {\n    const body = document.querySelector('body');\n    // Нам потрібно знати висоту документа та висоту екрану:\n    const bodyHeight = document.body.offsetHeight;\n    const screenHeight = window.innerHeight;\n    // Записуємо, скільки пікселів користувач вже проскролив:\n    const scrolled = window.scrollY;\n    // Позначимо поріг, після наближення якого викликатимемо якусь дію. У нашому випадку – чверть екрана до кінця сторінки:\n    const threshold = bodyHeight - screenHeight / 4;\n    // Відстежуємо, де знаходиться низ екрана щодо сторінки:\n    const position = scrolled + screenHeight;\n\n    if (position > threshold) {\n        // Якщо ми перетнули смугу-поріг, викликаємо потрібну дію.\n        // await fetchPictures()\n        body.classList.add('body--no-transparency');\n    } else {\n        body.classList.remove('body--no-transparency');\n    }\n}\n\n\nfunction throttle(callee, timeout) {\n    // Обробку прокручування варто трохи пригальмовувати, щоб вона виконувалася трохи рідше і таким чином менше навантажувала браузер. Додамо функцію throttle()\n    let timer = null;\n\n    return function perform(...args) {\n        if (timer) return;\n\n        timer = setTimeout(() => {\n            callee(...args);\n\n            clearTimeout(timer);\n            timer = null;\n        }, timeout)\n    }\n}\n\n// Наступну частину коду копіюєте до себе\n// Слухач заганяємо в умову: активний, якщо карток більш однієї сторінки\n//  if (totalImages > perPage) {\n// window.addEventListener('scroll', handleScroll);\n//         }\n\n// Функція для бескінечного скролу\n// function handleScroll() {\n//     const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n\n//     if (scrollTop + clientHeight >= scrollHeight - 1) {\n// запускаємо функцію завантаження наступної сторінки\n// onLoadMore();\n//     }\n// }"],"names":["BASE_URL","getProducts","page","limit","axios","subscriptionForm","e","emailInput","email","subscriptionData","response","data","error","icons","mainProductCard","renderProducts","perPage","totalPages","results","totalItems","createMarkup","container","Pagination","arr","item","categoryWithoutUnderscore","checkPosition","throttle","body","bodyHeight","screenHeight","scrolled","threshold","callee","timeout","timer","args"],"mappings":"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"}