{"version":3,"file":"scrollup-c64b1eda.js","sources":["../../src/js/local-storage.js","../../src/js/header.js","../../src/img/icone/symbol-defs.svg","../../src/js/footer.js","../../src/js/scrollup.js"],"sourcesContent":["// Функція для збереження фільтрів у localStorage\nexport function saveFilters(filters) {\n  localStorage.setItem('productFilters', JSON.stringify(filters));\n}\n\n// Функція для отримання фільтрів з localStorage\nexport function getFilters() {\n  const savedFilters = localStorage.getItem('productFilters');\n  return savedFilters\n    ? JSON.parse(savedFilters)\n    : { keyword: null, category: null, page: 1, limit: 6 };\n}\n\n// Функція для оновлення певного фільтра\nexport function updateFilter(key, value) {\n  const filters = getFilters();\n  filters[key] = value;\n  saveFilters(filters);\n}\n\n// Функція для збереження кошика у localStorage\nexport function saveCart(cart) {\n  localStorage.setItem('shoppingCart', JSON.stringify(cart));\n}\n\n// Функція для отримання кошика з localStorage\nexport function getCart() {\n  const savedCart = localStorage.getItem('shoppingCart');\n  return savedCart ? JSON.parse(savedCart) : [];\n}\n\n// Додавання продукту до кошика\nexport function addToCart(productToAdd) {\n  const cart = getCart();\n  const existingProductIndex = cart.findIndex(\n    item => item._id === productToAdd._id\n  );\n\n  if (existingProductIndex > -1) {\n    // Збільшуємо кількість існуючого продукту в кошику\n    cart[existingProductIndex].quantity += 1;\n  } else {\n    // Додаємо новий продукт в кошик з кількістю 1\n    cart.push({ ...productToAdd, quantity: 1 });\n  }\n\n  saveCart(cart);\n}\n\n// Видалення продукту з кошика\nexport function removeFromCart(productId) {\n  const cart = getCart();\n  const productIndex = cart.findIndex(item => item._id === productId);\n\n  if (productIndex > -1) {\n    if (cart[productIndex].quantity > 1) {\n      // Якщо кількість більше 1, зменшуємо її\n      cart[productIndex].quantity -= 1;\n    } else {\n      // Якщо кількість дорівнює 1, видаляємо продукт з кошика\n      cart.splice(productIndex, 1);\n    }\n  }\n\n  saveCart(cart);\n}\n\n// Очищення кошика\nexport function clearCart() {\n  saveCart([]);\n}\n\n// Кількість товарів в корзині\nexport function updateCartCount() {\n  const cartItems = getCart();\n  const totalCount = cartItems.reduce(\n    (count, item) => count + item.quantity,\n    0\n  );\n  const cartCountElement = document.querySelector('.numbers-of-products');\n  if (cartCountElement) {\n    cartCountElement.textContent = totalCount;\n  }\n}\n\n// Уніфікована функція для обробки кліку на кнопку додавання продукту до кошика\nexport function handleCartButtonClick(productId, arr, buttonClass, icons) {\n  const cart = getCart();\n  const productInCart = cart.find(item => item._id === productId);\n  const product = arr.find(item => item._id === productId);\n\n  if (productInCart) {\n    removeFromCart(productId);\n  } else if (product) {\n    addToCart(product);\n  }\n  updateCartButtonIcons(arr, '.modal-add-to-cart-btn', icons);\n  updateCartButtonIcons(arr, '.cart-btn-list', icons);\n  updateCartButtonIcons(arr, '.popular-cart-btn', icons);\n  updateCartButtonIcons(arr, '.cart-btn-list-discount', icons);\n  // Оновлення кількості товарів у кошику\n  updateCartCount();\n}\n\nfunction getCartButtonIconHTML(productId, cart, icons, buttonClass) {\n  const productInCart = cart.find(item => item._id === productId);\n  const iconId = productInCart\n    ? 'icon-check'\n    : 'icon-heroicons-solid_shopping-cart-18x18';\n  const width = buttonClass === '.popular-cart-btn' ? '12' : '18';\n  // Перевірка, чи клас кнопки відповідає 'modal-add-to-cart-btn'\n  if (buttonClass === '.modal-add-to-cart-btn') {\n    return `\n      <button class=\"modal-add-to-cart-btn\">\n        Add to \n        <svg class=\"modal-add-to-cart-svg\" width=\"${width}\" height=\"${width}\">\n          <use href=\"${icons}#${iconId}\"></use>\n        </svg>\n      </button>\n    `;\n  }\n\n  // Для інших класів повертаємо тільки SVG\n  return `\n    <svg class=\"${buttonClass === '.popular-cart-btn' ? 'olive' : 'list-cart-svg-list'}\" width=\"${width}\" height=\"${width}\">\n      <use href=\"${icons}#${iconId}\"></use>\n    </svg>\n  `;\n}\n\n// Уніфікована функція для оновлення іконок кнопок кошика\nexport function updateCartButtonIcons(arr, buttonClass, icons) {\n  const cart = getCart();\n  const buttons = document.querySelectorAll(buttonClass);\n\n  buttons.forEach(button => {\n    const productId = button.dataset.productId;\n    button.innerHTML = getCartButtonIconHTML(\n      productId,\n      cart,\n      icons,\n      buttonClass\n    );\n  });\n}\n\n// Уніфікована функція для встановлення обробників подій на кнопки додавання до кошика\nexport function setCartButtonEventListeners(arr, buttonClass, icons) {\n  document.querySelectorAll(buttonClass).forEach(button => {\n    button.addEventListener('click', e => {\n      e.stopPropagation();\n      const productId = e.currentTarget.dataset.productId;\n      handleCartButtonClick(productId, arr, buttonClass, icons);\n    });\n  });\n}\n","import { updateCartCount } from \"./local-storage\";\nupdateCartCount()","export default \"__VITE_ASSET__26d57c77__\"","document.addEventListener('DOMContentLoaded', () => {\n  const subscriptionForm = document.querySelector('.footer-sub-form');\n  const successModal = document.querySelector('.success-modal');\n  const failureModal = document.querySelector('.failure-modal');\n  const closeFooterModals = document.querySelectorAll('.close-svg');\n\n  subscriptionForm.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    const emailInput = subscriptionForm.querySelector('.footer-email-input');\n    const email = emailInput.value;\n\n    // Перевірка валідності email\n    if (!emailInput.checkValidity()) {\n      alert('Please enter a valid email address.');\n      return;\n    }\n\n    // Об'єкт, що відправляється на сервер\n    const subscriptionData = { email };\n\n    try {\n      const response = await fetch(\n        'https://food-boutique.b.goit.study/api/subscription',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(subscriptionData),\n        }\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        successModal.classList.add('open');\n      } else if (response.status === 409) {\n        failureModal.classList.add('open');\n      } else {\n        throw new Error('Failed to subscribe.');\n      }\n    } catch (error) {\n      alert('Error: ' + error.message);\n    }\n    emailInput.value = '';\n  });\n\n  // Функція, яка закриває модалку\n  function closeModal() {\n    if (failureModal.classList.contains('open')) {\n      failureModal.classList.remove('open');\n    } else if (successModal.classList.contains('open')) {\n      successModal.classList.remove('open');\n    }\n  }\n\n  // Закривання модалки при кліку на .close-svg\n  closeFooterModals.forEach(closeFooterModal => {\n    closeFooterModal.addEventListener('click', closeModal);\n  });\n\n  // Закривання модалки при натисканні клавіші \"Esc\"\n  document.addEventListener('keydown', function (event) {\n    if (event.key === 'Escape') {\n      closeModal();\n    }\n  });\n\n  // Закривання модалки при кліку поза модальним вікном\n  document.addEventListener('click', function (event) {\n    const isOutsideModal =\n      !event.target.closest('.failure-modal-interface') &&\n      !event.target.closest('.success-modal-interface');\n\n    if (isOutsideModal) {\n      closeModal();\n    }\n  });\n});\n","const offset = 100;\nconst scrollUp = document.querySelector('.scroll-up');\nconst scrollUpSvgPath = document.querySelector('.scroll-up__svg-path');\nconst pathLength = scrollUpSvgPath.getTotalLength();\n\nscrollUpSvgPath.style.strokeDasharray = `${pathLength} ${pathLength}`;\nscrollUpSvgPath.style.transition = 'stroke-dashoffset 20ms';\n\nconst getTop = () => {\n    return window.pageYOffset || document.documentElement.scrollTop;\n}\n\nconst updateDashoffset = () => {\n    const height = document.documentElement.scrollHeight - window.innerHeight;\n    const dashoffset = pathLength - (getTop() * pathLength / height);\n    scrollUpSvgPath.style.strokeDashoffset = dashoffset;\n}\n\nwindow.addEventListener('scroll', () => {\n    updateDashoffset();\n\n    if (getTop() > offset) {\n        scrollUp.classList.add('scroll-up--active');\n    } else {\n        scrollUp.classList.remove('scroll-up--active');\n    }\n});\n\nscrollUp.addEventListener('click', () => {\n    window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n    });\n});\n"],"names":["saveFilters","filters","getFilters","savedFilters","updateFilter","key","value","saveCart","cart","getCart","savedCart","addToCart","productToAdd","existingProductIndex","item","removeFromCart","productId","productIndex","clearCart","updateCartCount","totalCount","count","cartCountElement","handleCartButtonClick","arr","buttonClass","icons","productInCart","product","updateCartButtonIcons","getCartButtonIconHTML","iconId","width","button","setCartButtonEventListeners","e","subscriptionForm","successModal","failureModal","closeFooterModals","emailInput","email","subscriptionData","response","data","error","closeModal","closeFooterModal","event","offset","scrollUp","scrollUpSvgPath","pathLength","getTop","updateDashoffset","height","dashoffset"],"mappings":"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"}