{"version":3,"file":"popular-0fc2dbc8.js","sources":["../../src/js/local-storage.js","../../src/js/header.js","../../src/img/icone/symbol-defs.svg","../../src/js/modal-window.js","../../src/js/popular.js"],"sourcesContent":["// Функція для збереження фільтрів у localStorage\nexport function saveFilters(filters) {\n  localStorage.setItem('productFilters', JSON.stringify(filters));\n}\n\n// Функція для отримання фільтрів з localStorage\nexport function getFilters() {\n  const savedFilters = localStorage.getItem('productFilters');\n  return savedFilters\n    ? JSON.parse(savedFilters)\n    : { keyword: null, category: null, page: 1, limit: 6 };\n}\n\n// Функція для оновлення певного фільтра\nexport function updateFilter(key, value) {\n  const filters = getFilters();\n  filters[key] = value;\n  saveFilters(filters);\n}\n\n// Функція для збереження кошика у localStorage\nexport function saveCart(cart) {\n  localStorage.setItem('shoppingCart', JSON.stringify(cart));\n}\n\n// Функція для отримання кошика з localStorage\nexport function getCart() {\n  const savedCart = localStorage.getItem('shoppingCart');\n  return savedCart ? JSON.parse(savedCart) : [];\n}\n\n// Додавання продукту до кошика\nexport function addToCart(productToAdd) {\n  const cart = getCart();\n  const existingProductIndex = cart.findIndex(\n    item => item._id === productToAdd._id\n  );\n\n  if (existingProductIndex > -1) {\n    // Збільшуємо кількість існуючого продукту в кошику\n    cart[existingProductIndex].quantity += 1;\n  } else {\n    // Додаємо новий продукт в кошик з кількістю 1\n    cart.push({ ...productToAdd, quantity: 1 });\n  }\n\n  saveCart(cart);\n}\n\n// Видалення продукту з кошика\nexport function removeFromCart(productId) {\n  const cart = getCart();\n  const productIndex = cart.findIndex(item => item._id === productId);\n\n  if (productIndex > -1) {\n    if (cart[productIndex].quantity > 1) {\n      // Якщо кількість більше 1, зменшуємо її\n      cart[productIndex].quantity -= 1;\n    } else {\n      // Якщо кількість дорівнює 1, видаляємо продукт з кошика\n      cart.splice(productIndex, 1);\n    }\n  }\n\n  saveCart(cart);\n}\n\n// Очищення кошика\nexport function clearCart() {\n  saveCart([]);\n}\n\n// Кількість товарів в корзині\nexport function updateCartCount() {\n  const cartItems = getCart();\n  const totalCount = cartItems.reduce(\n    (count, item) => count + item.quantity,\n    0\n  );\n  const cartCountElement = document.querySelector('.numbers-of-products');\n  if (cartCountElement) {\n    cartCountElement.textContent = totalCount;\n  }\n}\n\n// Уніфікована функція для обробки кліку на кнопку додавання продукту до кошика\nexport function handleCartButtonClick(productId, arr, buttonClass, icons) {\n  const cart = getCart();\n  const productInCart = cart.find(item => item._id === productId);\n  const product = arr.find(item => item._id === productId);\n\n  if (productInCart) {\n    removeFromCart(productId);\n  } else if (product) {\n    addToCart(product);\n  }\n  updateCartButtonIcons(arr, '.cart-btn-list', icons);\n  updateCartButtonIcons(arr, '.popular-cart-btn', icons);\n  updateCartButtonIcons(arr, '.cart-btn-list-discount', icons);\n  // Оновлення кількості товарів у кошику\n  updateCartCount();\n}\n\n// Функція для генерації HTML іконки\nfunction getCartButtonIconHTML(productId, cart, icons, buttonClass) {\n  const productInCart = cart.find(item => item._id === productId);\n  const iconId = productInCart\n    ? 'icon-check'\n    : 'icon-heroicons-solid_shopping-cart-18x18';\n  const width = buttonClass === '.popular-cart-btn' ? '12' : '18'; // Припустимо, що для .popular-cart-btn ширина інша\n  return `\n    <svg class=\"list-cart-svg-list ${\n      buttonClass === '.popular-cart-btn' ? 'olive' : ''\n    }\" width=\"${width}\" height=\"${width}\">\n      <use href=\"${icons}#${iconId}\"></use>\n    </svg>\n  `;\n}\n\n// Уніфікована функція для оновлення іконок кнопок кошика\nexport function updateCartButtonIcons(arr, buttonClass, icons) {\n  const cart = getCart();\n  const buttons = document.querySelectorAll(buttonClass);\n\n  buttons.forEach(button => {\n    const productId = button.dataset.productId;\n    button.innerHTML = getCartButtonIconHTML(\n      productId,\n      cart,\n      icons,\n      buttonClass\n    );\n  });\n}\n\n// Уніфікована функція для встановлення обробників подій на кнопки додавання до кошика\nexport function setCartButtonEventListeners(arr, buttonClass, icons) {\n  document.querySelectorAll(buttonClass).forEach(button => {\n    button.addEventListener('click', e => {\n      const productId = e.currentTarget.dataset.productId;\n      handleCartButtonClick(productId, arr, buttonClass, icons);\n    });\n  });\n}\n","import { updateCartCount } from \"./local-storage\";\nupdateCartCount()","export default \"__VITE_ASSET__26d57c77__\"","document.getElementById(\"open-modal-btn\").addEventListener(\"click\", openModal)\ndocument.getElementById(\"close-my-modal-btn\").addEventListener(\"click\", closeModal)\n\n// Відкрити модальне вікно\nfunction openModal(){\n    document.getElementById(\"my-modal\").classList.add(\"open\")\n}\n\n\n// Закрити модальне вікно\nfunction closeModal() {\n    document.getElementById(\"my-modal\").classList.remove(\"open\")\n}\n\n// Закрити модальне вікно на Esc\nwindow.addEventListener('keydown', (e) => {\n    if (e.key === \"Escape\") {\n        document.getElementById(\"my-modal\").classList.remove(\"open\")\n    }\n});\n\n// Закрити модальне вікно при кліку поза вікном \ndocument.querySelector(\"#my-modal .modal__box\").addEventListener('click', event => {\n    event._isClickWithInModal = true;\n});\ndocument.getElementById(\"my-modal\").addEventListener('click', event => {\n    if (event._isClickWithInModal) return;\n    event.currentTarget.classList.remove('open');\n});","import axios from 'axios';\nimport icons from '../img/icone/symbol-defs.svg';\nimport { updateCartButtonIcons, setCartButtonEventListeners } from './local-storage';\n\nconst popularProductsURL =\n  'https://food-boutique.b.goit.study/api/products/popular';\n\nfunction renderPopularProducts(products) {\n  const productList = document.querySelector('.popular-product-list');\n\n  products.forEach(product => {\n    const listItem = document.createElement('li');\n    listItem.classList.add('popular-product-item');\n    const popularCategoryWithoutUnderscore = product.category\n      .split('_')\n      .join(' ');\n    listItem.innerHTML = `\n      <a class=\"popular-modal\">\n                 <div class=\"popular-img\">\n            <img class=\"popular-photo-item\" src=\"${product.img}\" alt=\"${product.name}\" width=\"56\" height=\"56\" loading=\"lazy\">\n          </div>  \n          <ul class=\"about-popular\">\n            <li class=\"name-popular-product\">${product.name}</li>\n            <li class=\"subname-popular-product\">Category: <span class=\"id-subname\">${popularCategoryWithoutUnderscore}</span></li>\n            <li class=\"subname-popular-product\">Size: <span class=\"id-subname\">${product.size}</span></li>\n            <li class=\"subname-popular-product\">Popularity: <span class=\"id-subname\">${product.popularity}</span></li>\n          </ul>\n          <button class='popular-cart-btn' type=\"button\" data-product-id=\"${product._id}\">          \n                                <svg class=\"list-cart-svg-list\" width=\"18\" height=\"18\" >\n                                    <use href=\"${icons}#icon-heroicons-solid_shopping-cart-18x18\">\n                                    </use>\n                                </svg>\n                            </button>\n        </a>\n    `;\n\n    productList.appendChild(listItem);\n  });\n  updateCartButtonIcons(products, '.popular-cart-btn', icons);\n  setCartButtonEventListeners(products, '.popular-cart-btn', icons);\n\n}\n\nasync function fetchPopularProducts() {\n  try {\n    const response = await axios.get(popularProductsURL);\n    \n    return response.data; // Повертаємо список популярних продуктів з відповіді\n  } catch (error) {\n    console.error('Error fetching popular products:', error);\n    throw error; // Обробка помилки, якщо запит не вдалося виконати\n  }\n}\n\n// Викликаємо функцію для отримання списку популярних продуктів\nfetchPopularProducts()\n  .then(popularProducts => {\n    \n    // Рендеримо список популярних продуктів\n    renderPopularProducts(popularProducts);       \n  })\n  .catch(error => {\n    console.error('Error:', error);\n    // Тут можна обробити помилку, якщо отримання популярних продуктів не вдалося\n  });\n"],"names":["saveFilters","filters","getFilters","savedFilters","updateFilter","key","value","saveCart","cart","getCart","savedCart","addToCart","productToAdd","existingProductIndex","item","removeFromCart","productId","productIndex","clearCart","updateCartCount","totalCount","count","cartCountElement","handleCartButtonClick","arr","buttonClass","icons","productInCart","product","updateCartButtonIcons","getCartButtonIconHTML","iconId","width","button","setCartButtonEventListeners","e","openModal","closeModal","event","popularProductsURL","renderPopularProducts","products","productList","listItem","popularCategoryWithoutUnderscore","fetchPopularProducts","axios","error","popularProducts"],"mappings":"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"}