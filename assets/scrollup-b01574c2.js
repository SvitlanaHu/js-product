(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();function L(e){localStorage.setItem("productFilters",JSON.stringify(e))}function b(){const e=localStorage.getItem("productFilters");return e?JSON.parse(e):{keyword:null,category:null,page:1,limit:6}}function O(e,t){const s=b();s[e]=t,L(s)}function m(e){localStorage.setItem("shoppingCart",JSON.stringify(e))}function l(){const e=localStorage.getItem("shoppingCart");return e?JSON.parse(e):[]}function S(e){const t=l(),s=t.findIndex(r=>r._id===e._id);s>-1?t[s].quantity+=1:t.push({...e,quantity:1}),m(t)}function C(e){const t=l(),s=t.findIndex(r=>r._id===e);s>-1&&(t[s].quantity>1?t[s].quantity-=1:t.splice(s,1)),m(t)}function F(){m([])}function g(){const t=l().reduce((r,o)=>r+o.quantity,0),s=document.querySelector(".numbers-of-products");s&&(s.textContent=t)}function I(e,t,s,r){const n=l().find(a=>a._id===e),c=t.find(a=>a._id===e);n?C(e):c&&S(c),d(t,".modal-add-to-cart-btn",r),d(t,".cart-btn-list",r),d(t,".popular-cart-btn",r),d(t,".cart-btn-list-discount",r),g()}function E(e,t,s,r){const n=t.find(a=>a._id===e)?"icon-check":"icon-heroicons-solid_shopping-cart-18x18",c=r===".popular-cart-btn"?"12":"18";return r===".modal-add-to-cart-btn"?`
        Add to 
        <svg class="modal-add-to-cart-svg" width="${c}" height="${c}">
          <use href="${s}#${n}"></use>
        </svg>
    `:`
    <svg class="${r===".popular-cart-btn"?"olive":"list-cart-svg-list"}" width="${c}" height="${c}">
      <use href="${s}#${n}"></use>
    </svg>
  `}function d(e,t,s){const r=l();document.querySelectorAll(t).forEach(n=>{const c=n.dataset.productId;n.innerHTML=E(c,r,s,t)})}function $(e,t,s){document.querySelectorAll(t).forEach(r=>{r.addEventListener("click",o=>{o.stopPropagation();const n=o.currentTarget.dataset.productId;I(n,e,t,s)})})}g();const M="/js-product/assets/symbol-defs-2260a6ca.svg";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".footer-sub-form"),t=document.querySelector(".success-modal"),s=document.querySelector(".failure-modal"),r=document.querySelectorAll(".close-svg"),o=document.body;e.addEventListener("submit",async c=>{c.preventDefault();const a=e.querySelector(".footer-email-input"),y=a.value;if(!a.checkValidity()){alert("Please enter a valid email address.");return}const v={email:y};try{const i=await fetch("https://food-boutique.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(i.ok){const k=await i.json();t.classList.add("open"),o.classList.add("modal-open")}else if(i.status===409)s.classList.add("open"),o.classList.add("modal-open");else throw new Error("Failed to subscribe.")}catch(i){alert("Error: "+i.message)}a.value=""});function n(){s.classList.contains("open")?(s.classList.remove("open"),o.classList.remove("modal-open")):t.classList.contains("open")&&(t.classList.remove("open"),o.classList.remove("modal-open"))}r.forEach(c=>{c.addEventListener("click",n)}),document.addEventListener("keydown",function(c){c.key==="Escape"&&n()}),document.addEventListener("click",function(c){!c.target.closest(".failure-modal-interface")&&!c.target.closest(".success-modal-interface")&&n()})});const w=100,p=document.querySelector(".scroll-up"),f=document.querySelector(".scroll-up__svg-path"),u=f.getTotalLength();f.style.strokeDasharray=`${u} ${u}`;f.style.transition="stroke-dashoffset 20ms";const h=()=>window.pageYOffset||document.documentElement.scrollTop,q=()=>{const e=document.documentElement.scrollHeight-window.innerHeight,t=u-h()*u/e;f.style.strokeDashoffset=t};window.addEventListener("scroll",()=>{q(),h()>w?p.classList.add("scroll-up--active"):p.classList.remove("scroll-up--active")});p.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});export{d as a,$ as b,F as c,b as d,O as e,l as g,M as i,m as s,g as u};
//# sourceMappingURL=scrollup-b01574c2.js.map
