(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function g(e){localStorage.setItem("productFilters",JSON.stringify(e))}function y(){const e=localStorage.getItem("productFilters");return e?JSON.parse(e):{keyword:null,category:null,page:1,limit:6}}function S(e,t){const n=y();n[e]=t,g(n)}function f(e){localStorage.setItem("shoppingCart",JSON.stringify(e))}function l(){const e=localStorage.getItem("shoppingCart");return e?JSON.parse(e):[]}function h(e){const t=l(),n=t.findIndex(r=>r._id===e._id);n>-1?t[n].quantity+=1:t.push({...e,quantity:1}),f(t)}function v(e){const t=l(),n=t.findIndex(r=>r._id===e);n>-1&&(t[n].quantity>1?t[n].quantity-=1:t.splice(n,1)),f(t)}function C(){f([])}function p(){const t=l().reduce((r,s)=>r+s.quantity,0),n=document.querySelector(".numbers-of-products");n&&(n.textContent=t)}function b(e,t,n,r){const o=l().find(i=>i._id===e),c=t.find(i=>i._id===e);o?v(e):c&&h(c),d(t,".modal-add-to-cart-btn",r),d(t,".cart-btn-list",r),d(t,".popular-cart-btn",r),d(t,".cart-btn-list-discount",r),p()}function L(e,t,n,r){const o=t.find(i=>i._id===e)?"icon-check":"icon-heroicons-solid_shopping-cart-18x18",c=r===".popular-cart-btn"?"12":"18";return console.log(r),r===".modal-add-to-cart-btn"?`
      <button class="modal-add-to-cart-btn">
        Add to 
        <svg class="modal-add-to-cart-svg" width="${c}" height="${c}">
          <use href="${n}#${o}"></use>
        </svg>
      </button>
    `:`
    <svg class="${r===".popular-cart-btn"?"olive":"list-cart-svg-list"}" width="${c}" height="${c}">
      <use href="${n}#${o}"></use>
    </svg>
  `}function d(e,t,n){const r=l();document.querySelectorAll(t).forEach(o=>{const c=o.dataset.productId;o.innerHTML=L(c,r,n,t)})}function q(e,t,n){document.querySelectorAll(t).forEach(r=>{r.addEventListener("click",s=>{s.stopPropagation();const o=s.currentTarget.dataset.productId;b(o,e,t,n)})})}p();const w="/js-product/assets/symbol-defs-2260a6ca.svg";document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".footer-sub-form"),t=document.querySelector(".success-modal"),n=document.querySelector(".failure-modal"),r=document.querySelectorAll(".close-svg");e.addEventListener("submit",async o=>{o.preventDefault();const c=e.querySelector(".footer-email-input"),i=c.value;if(!c.checkValidity()){alert("Please enter a valid email address.");return}const m={email:i};try{const a=await fetch("https://food-boutique.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(a.ok){const I=await a.json();t.classList.add("open")}else if(a.status===409)n.classList.add("open");else throw new Error("Failed to subscribe.")}catch(a){alert("Error: "+a.message)}c.value=""});function s(){n.classList.contains("open")?n.classList.remove("open"):t.classList.contains("open")&&t.classList.remove("open")}r.forEach(o=>{o.addEventListener("click",s)}),document.addEventListener("keydown",function(o){o.key==="Escape"&&s()}),document.addEventListener("click",function(o){!o.target.closest(".failure-modal-interface")&&!o.target.closest(".success-modal-interface")&&s()})});let u=document.querySelector(".top-btn");u.onclick=()=>window.scrollTo({top:0,behavior:"smooth"});window.onscroll=()=>{window.scrollY>500?u.style.display="flex":u.style.display="none"};export{d as a,q as b,C as c,y as d,S as e,l as g,w as i,f as s,p as u};
//# sourceMappingURL=scrollup-90be812b.js.map
