{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart-page.js"],"sourcesContent":["import icons from '../img/icone/symbol-defs.svg';\nimport { getCart } from './local-storage';\nimport { clearCart } from './local-storage';\nimport { saveCart } from './local-storage';\n// import axios from 'axios';\n\n// const BASE_URL = 'https://food-boutique.b.goit.study/api/products';\n\nconst cartProductList = document.querySelector('.js-cart-list');\nconst deleteAllBtn = document.querySelector('.js-delete-all-btn');\nconst allContentWrap = document.querySelector('.all-content-wrap');\nconst numberOfProducts = document.querySelector('.js-number-of-products');\nconst cartAmount = document.querySelector('.js-cart-amount');\nconst orderForm = document.querySelector('.order-form');\n\nrenderCartMarkup();\ngetNumberOfProducts();\n\nfunction renderCartMarkup() {\n  const arrSavedCart = getCart();\n  allContentWrap.classList.add('is-visible-main-content');\n  renderCartTpl(arrSavedCart);\n  cartProductList.addEventListener('click', onClickDeleteProduct);\n  // orderForm.addEventListener('submit', onOrderFormSubmit);\n}\n\nfunction onClickDeleteProduct(evt) {\n  if (!evt.target.classList.contains('js-delete-product-btn')) {\n    return;\n  }\n\n  const parent = evt.target.closest('.js-cart-item');\n  const productId = parent.dataset.id;\n\n  const productsCartInLS = getCart();\n  const findProduct = productsCartInLS.filter(({ _id }) => productId !== _id);\n\n  saveCart(findProduct);\n\n  parent.style.display = 'none';\n\n  getNumberOfProducts();\n\n  checkLS();\n  countTotalAmount();\n}\n\nfunction checkLS() {\n  const lsData = getCart();\n  if (!lsData.length) {\n    allContentWrap.classList.replace(\n      'is-visible-main-content',\n      'is-hidden-main-content'\n    );\n  }\n}\n\n// Розмітка cartProductList\nfunction renderCartTpl(arr) {\n  if (!arr.length) {\n    allContentWrap.classList.add('is-hidden-main-content');\n    return;\n  }\n\n  const markup = arr\n    .map(({ _id, name, img, category, price, size }) => {\n      return `<li class=\"cart-item js-cart-item\" data-id = ${_id}>\n       <span class=\"delete-product-btn js-delete-product-btn\">\n              <svg width=\"12\" height=\"12\" class='js-delete-product-btn'>\n                <use class='js-delete-product-btn' href=\"${icons}#close-button\"></use></svg\n            ></span>\n          <div class=\"cart-item-info-wrap\">\n            <div class=\"cart-img-wrap-bgc\">\n              <div class=\"cart-img-thumb\">\n              <img\n                src=\"${img}\"\n                alt=\"${name}\"\n                width=\"100\"\n                height=\"100\"\n              />\n              </div>\n            </div>\n            <div class=\"cart-item-descr\">\n              <h3 class=\"cart-item-title\">${name}</h3>\n              <div class=\"cart-text-wrap\">\n                <p class=\"cart-item-text\">\n                  <span class=\"cart-light-text\">Category:</span\n                  >&nbsp;&nbsp;${category}\n                </p>\n                <p class=\"cart-item-text\">\n                  <span class=\"cart-light-text\">Size:</span>&nbsp;&nbsp;${size}\n                </p>\n              </div>\n              <p class=\"cart-item-price\">${price}</p>\n            </div>\n          </div>\n        </li>`;\n    })\n    .join('');\n\n  return (cartProductList.innerHTML = markup);\n}\n\n// Кнопка видалення усіх продуктів\ndeleteAllBtn.addEventListener('click', () => {\n  clearCart();\n  getNumberOfProducts();\n  allContentWrap.classList.replace(\n    'is-visible-main-content',\n    'is-hidden-main-content'\n  );\n});\n\nfunction getNumberOfProducts() {\n  const lsData = getCart();\n  numberOfProducts.textContent = lsData.length;\n}\n\nfunction countTotalAmount() {\n  const lsData = getCart();\n\n  const amount = lsData.reduce((acc, { price }) => (acc += price), 0);\n  cartAmount.textContent = amount;\n}\n\ncountTotalAmount();\n\n// ================================================\n\n// function onOrderFormSubmit(evt) {\n//   evt.preventDefault();\n//   const email = evt.currentTarget.elements.email.value;\n\n//   if (!email) {\n//     alert('Please, write your email!');\n//     return;\n//   }\n//   console.log(email);\n//   console.log('Отправили заказ');\n// }\n\n// const createNewOrder = async orderObj => {\n//   const res = await axios.post(`${BASE_URL}orders/`, orderObj);\n//   return await res.data;\n// };\n\n// createNewOrder();\n"],"names":["cartProductList","deleteAllBtn","allContentWrap","numberOfProducts","cartAmount","renderCartMarkup","getNumberOfProducts","arrSavedCart","getCart","renderCartTpl","onClickDeleteProduct","evt","parent","productId","findProduct","_id","saveCart","checkLS","countTotalAmount","arr","markup","name","img","category","price","size","icons","clearCart","lsData","amount","acc"],"mappings":"4EAQA,MAAMA,EAAkB,SAAS,cAAc,eAAe,EACxDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAmB,SAAS,cAAc,wBAAwB,EAClEC,EAAa,SAAS,cAAc,iBAAiB,EACzC,SAAS,cAAc,aAAa,EAEtDC,IACAC,IAEA,SAASD,GAAmB,CAC1B,MAAME,EAAeC,IACrBN,EAAe,UAAU,IAAI,yBAAyB,EACtDO,EAAcF,CAAY,EAC1BP,EAAgB,iBAAiB,QAASU,CAAoB,CAEhE,CAEA,SAASA,EAAqBC,EAAK,CACjC,GAAI,CAACA,EAAI,OAAO,UAAU,SAAS,uBAAuB,EACxD,OAGF,MAAMC,EAASD,EAAI,OAAO,QAAQ,eAAe,EAC3CE,EAAYD,EAAO,QAAQ,GAG3BE,EADmBN,IACY,OAAO,CAAC,CAAE,IAAAO,KAAUF,IAAcE,CAAG,EAE1EC,EAASF,CAAW,EAEpBF,EAAO,MAAM,QAAU,OAEvBN,IAEAW,IACAC,GACF,CAEA,SAASD,GAAU,CACFT,IACH,QACVN,EAAe,UAAU,QACvB,0BACA,wBACN,CAEA,CAGA,SAASO,EAAcU,EAAK,CAC1B,GAAI,CAACA,EAAI,OAAQ,CACfjB,EAAe,UAAU,IAAI,wBAAwB,EACrD,MACD,CAED,MAAMkB,EAASD,EACZ,IAAI,CAAC,CAAE,IAAAJ,EAAK,KAAAM,EAAM,IAAAC,EAAK,SAAAC,EAAU,MAAAC,EAAO,KAAAC,KAChC,gDAAgDV;AAAA;AAAA;AAAA,2DAGFW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAMpCJ;AAAA,uBACAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAOqBA;AAAA;AAAA;AAAA;AAAA,iCAIXE;AAAA;AAAA;AAAA,0EAGyCE;AAAA;AAAA;AAAA,2CAG/BD;AAAA;AAAA;AAAA,cAItC,EACA,KAAK,EAAE,EAEV,OAAQxB,EAAgB,UAAYoB,CACtC,CAGAnB,EAAa,iBAAiB,QAAS,IAAM,CAC3C0B,IACArB,IACAJ,EAAe,UAAU,QACvB,0BACA,wBACJ,CACA,CAAC,EAED,SAASI,GAAsB,CAC7B,MAAMsB,EAASpB,IACfL,EAAiB,YAAcyB,EAAO,MACxC,CAEA,SAASV,GAAmB,CAG1B,MAAMW,EAFSrB,IAEO,OAAO,CAACsB,EAAK,CAAE,MAAAN,CAAK,IAAQM,GAAON,EAAQ,CAAC,EAClEpB,EAAW,YAAcyB,CAC3B,CAEAX"}